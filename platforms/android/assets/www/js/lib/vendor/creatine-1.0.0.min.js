/*! Creatine 2015-04-26 */
String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.lastIndexOf(a,b)===b}),String.prototype.endsWith||(String.prototype.endsWith=function(a,b){var c=this.toString();(void 0===b||b>c.length)&&(b=c.length),b-=a.length;var d=c.indexOf(a,b);return-1!==d&&d===b}),this.creatine=this.creatine||{},this.creatine.transitions=this.creatine.transitions||{},this.creatine.tmx=this.creatine.tmx||{},"undefined"==typeof this.tine&&(this.tine=this.creatine),creatine.TOP_LEFT="topleft",creatine.TOP_RIGHT="topright",creatine.BOTTOM_LEFT="bottomleft",creatine.BOTTOM_RIGHT="bottomright",creatine.TOP="top",creatine.BOTTOM="bottom",creatine.LEFT="left",creatine.RIGHT="right",creatine.CENTER="center",creatine.HORIZONTAL="horizontal",creatine.VERTICAL="vertical",creatine.LEFT_TO_RIGHT=12,creatine.RIGHT_TO_LEFT=13,creatine.TOP_TO_BOTTOM=14,creatine.BOTTOM_TO_TOP=15,creatine.STRETCH=16,creatine.FIT=17,creatine.FILL=18,creatine.NOSCALE=19,creatine.DEGREES=57.2957795,creatine.RADIANS=.0174532925,creatine.PI2=6.2831853071,creatine.VERSION="1.0.0",creatine.DEFAULT_CONFIG={project:"creatine_game",width:800,height:600,container:null,framerate:60,showfps:!1,background_color:"#000",resources:{base_path:"./",manifest:[]}},creatine.shuffle=function(a){for(var b,c,d=a.length;d;)c=Math.floor(Math.random()*d--),b=a[d],a[d]=a[c],a[c]=b;return a},creatine.randomPolar=function(){return 2*Math.random()-1},creatine.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},creatine.clip=function(a,b,c){return Math.max(Math.min(a,c),b)},creatine.wrapAngle=function(a){return 0>a?360+a%360:a%360},creatine.angleDistance=function(a,b){a=0>a?360+a%360:a%360,b=0>b?360+b%360:b%360;var c=b-a;return 0>c&&(c+=360),c>180&&(c=360-c),c},creatine.angleDirection=function(a,b){if(a=0>a?360+a%360:a%360,b=0>b?360+b%360:b%360,a===b)return 0;var c=b-a;return 0>c&&(c+=360),c>180?-1:1},creatine.merge=function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&("object"==typeof b?arguments[0][b]=creatine.merge.call(null,arguments[0][b]||{},arguments[a][b]):arguments[0][b]=arguments[a][b]);return arguments[0]},creatine.getJSON=function(a,b){function c(a){a&&"function"==typeof b&&b(JSON.parse(a))}var d=new XMLHttpRequest;d.overrideMimeType("application/json"),d.onreadystatechange=function(){ready=4===d.readyState&&200===d.status,c(ready?d.responseText:!1)},d.open("GET",a,!0),d.send()},creatine.__lastID=0,creatine.newId=function(){return++creatine.__lastID},function(){"use strict";var a=function(a,b){if(this.config=null,this.state=null,this.canvas=null,this.stage=null,this.create=null,this.load=null,this.keyboard=null,this.mouse=null,this.touch=null,this.gamepad=null,this.storage=null,this.sound=null,this.plugins=null,this.director=null,this.time=null,this.display=null,this.device=null,"string"==typeof a){var c=this;creatine.getJSON(a,function(a){c._initialize(a,b)})}else this._initialize(a,b)},b=a.prototype;b._initializeConfig=function(a){if(a){if(a=creatine.merge({},creatine.DEFAULT_CONFIG,a),"string"!=typeof a.project)throw Error("Invalid project name. Please use a string.");if(!/^\w+$/i.test(a.project))throw Error("Invalid project name. Please only use letters, numbers and underscore");(a.width!==parseInt(a.width,10)||0===a.width)&&(a.width=creatine.DEFAULT_CONFIG.width),(a.height!==parseInt(a.height,10)||0===a.height)&&(a.height=creatine.DEFAULT_CONFIG.height),(a.framerate!==parseInt(a.framerate,10)||0===a.framerate)&&(a.framerate=creatine.DEFAULT_CONFIG.framerate),a.debug=Boolean(a.debug),a.showfps=Boolean(a.showfps)}else a=creatine.DEFAULT_CONFIG;return this.config=a,a},b._initializeState=function(a){function b(a){return"function"==typeof a}a||(a={}),b(a.boot)||delete a.boot,b(a.preload)||delete a.preload,b(a.create)||delete a.create,b(a.update)||delete a.update,b(a.draw)||delete a.draw,this.state=a},b._initialize=function(a,b){var a=this._initializeConfig(a);this._initializeState(b),this.canvas=document.createElement("canvas"),this.canvas.width=a.width,this.canvas.height=a.height,this.canvas.style.backgroundColor=a.background_color,this.canvas.style.outline="none",this.canvas.setAttribute("tabindex","0"),this.canvas.addEventListener("mousedown",this.canvas.focus,!1);var c=document.getElementById(a.container)||document.body;c.appendChild(this.canvas),this.canvas.focus(),this.stage=new createjs.Stage(this.canvas),this.stage.snapToPixelEnabled=!0,createjs.Ticker.framerate=a.framerate,createjs.Touch.enable(this.stage),createjs.Sound.initializeDefaultPlugins(),this.time=new creatine.TimeManager(this),this.device=new creatine.DeviceManager(this),this.display=new creatine.DisplayManager(this),this.load=new creatine.ResourceManager(this),this.create=new creatine.FactoryManager(this),this.director=new creatine.SceneManager(this),this.storage=new creatine.StorageManager(this),this.sound=new creatine.SoundManager(this),this.keyboard=new creatine.KeyboardManager(this),this.mouse=new creatine.MouseManager(this),this.gamepad=new creatine.GamepadManager(this),this.touch=new creatine.TouchManager(this),this.plugins=new creatine.PluginManager(this),this._started=!1;var d=this;setTimeout(function(){d._boot()},0)},b._boot=function(){this.state.boot&&this.state.boot(this),this.time.on("tick",this._mainLoop,this),this._preload()},b._preload=function(){this.state.preload&&this.state.preload(this),this.load.isFinished()&&!this.config.resources.manifest?this._create():(this.load.on("complete",this._create,this),this.config.resources.manifest&&this.load.manifest(this.config.resources.manifest),this.load.load())},b._create=function(){this.state.create&&this.state.create(this),this._started=!0},b._update=function(){this.mouse.preUpdate(),this.gamepad.preUpdate(),this.plugins.preUpdate(),this._started&&this.state.update&&this.state.update(this),this.director.update(),this.plugins.update(),this.keyboard.postUpdate(),this.mouse.postUpdate(),this.gamepad.postUpdate(),this.plugins.postUpdate()},b._draw=function(){this.plugins.preDraw(),this.plugins.draw(),this.stage.update(),this.state.draw&&this.state.draw(this),this.plugins.postDraw()},b._mainLoop=function(){this._update(),this._draw()},creatine.Game=a}(),function(){"use strict";var a=function(a){this.game=a,this._canvas=a.canvas,this.desktop=!1,this.iOS=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.windowsPhone=!1,this.canvas=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.webGL=!1,this.worker=!1,this.touch=!1,this.mspointer=!1,this.css3D=!1,this.pointerLock=!1,this.typedArray=!1,this.vibration=!1,this.getUserMedia=!1,this.quirksMode=!1,this.ejecta=!1,this.cocoonJS=!1,this.webApp=!1,this.arora=!1,this.chrome=!1,this.epiphany=!1,this.firefox=!1,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.silk=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this.littleEndian=!1,this.fullscreen=!1,this._checkAudio(),this._checkBrowser(),this._checkCSS3D(),this._checkDevice(),this._checkFeatures(),this._checkOS(),this._checkFullscreen()},b=a.prototype;b._checkOS=function(){var a=navigator.userAgent;/Android/.test(a)?this.android=!0:/CrOS/.test(a)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(a)?this.iOS=!0:/Linux/.test(a)?this.linux=!0:/Mac OS/.test(a)?this.macOS=!0:/Windows/.test(a)&&(this.windows=!0,/Windows Phone/i.test(a)&&(this.windowsPhone=!0)),(this.windows||this.macOS||this.linux&&this.silk===!1)&&(this.desktop=!0),(this.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(this.desktop=!1)},b._checkFeatures=function(){try{this.localStorage=!!localStorage.getItem}catch(a){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}(),null===this.webGL||this.webGL===!1?this.webGL=!1:this.webGL=!0,this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>1)&&(this.touch=!0),(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&(this.mspointer=!0),this.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,this.quirksMode="CSS1Compat"===document.compatMode?!1:!0,this.getUserMedia=!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},b._checkBrowser=function(){var a=navigator.userAgent;/Arora/.test(a)?this.arora=!0:/Chrome/.test(a)?this.chrome=!0:/Epiphany/.test(a)?this.epiphany=!0:/Firefox/.test(a)?this.firefox=!0:/Mobile Safari/.test(a)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(a)?this.midori=!0:/Opera/.test(a)?this.opera=!0:/Safari/.test(a)?this.safari=!0:/Silk/.test(a)?this.silk=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a)&&(this.ie=!0,this.trident=!0,this.tridentVersion=parseInt(RegExp.$1,10),this.ieVersion=parseInt(RegExp.$3,10)),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0),"undefined"!=typeof window.ejecta&&(this.ejecta=!0)},b._checkAudio=function(){this.audioData=!!window.Audio,this.webAudio=!(!window.webkitAudioContext&&!window.AudioContext);var a=document.createElement("audio"),b=!1;try{(b=!!a.canPlayType)&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")&&(this.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(this.webm=!0))}catch(c){}},b._checkDevice=function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),this.iPhone4=2==this.pixelRatio&&this.iPhone,this.iPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad"),"undefined"!=typeof Int8Array?(this.littleEndian=new Int8Array(new Int16Array([1]).buffer)[0]>0,this.typedArray=!0):(this.littleEndian=!1,this.typedArray=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(this.vibration=!0)},b._checkCSS3D=function(){var a,b=document.createElement("p"),c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(b,null);for(var d in c)void 0!==b.style[d]&&(b.style[d]="translate3d(1px,1px,1px)",a=window.getComputedStyle(b).getPropertyValue(c[d]));document.body.removeChild(b),this.css3D=void 0!==a&&a.length>0&&"none"!==a},b._checkFullscreen=function(){for(var a=["requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","mozRequestFullScreen"],b=0;b<a.length;b++)if(this._canvas[a[b]]){this.fullscreen=!0;break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(this.fullscreenKeyboard=!0)},b.canPlayAudio=function(a){return"mp3"==a&&this.mp3?!0:"ogg"===a&&(this.ogg||this.opus)?!0:"m4a"===a&&this.m4a?!0:"wav"===a&&this.wav?!0:"webm"===a&&this.webm?!0:!1},creatine.DeviceManager=a}(),function(){"use strict";var a=function(a){this.game=a,this.canvas=a.canvas,this.width=null,this.height=null,this.sourceWidth=null,this.sourceHeight=null,this.minWidth=null,this.minHeight=null,this.maxWidth=null,this.maxHeight=null,this.orientation=null,this.scaleUsingCSS=!1,this._fullscreenRequest=null,this._width=null,this._height=null,this._initialize()},b=createjs.extend(a,createjs.EventDispatcher);b._initialize=function(){this.EventDispatcher_constructor(),this.width=this.sourceWidth=this.canvas.width,this.height=this.sourceHeight=this.canvas.height,this.orientation=0,this.scaleUsingCSS=!1,window.orientation?this.orientation=window.orientation:window.outerWidth>window.outerHeight&&(this.orientation=90);for(var a=["requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","mozRequestFullScreen"],b=0;b<a.length;b++)if(this.canvas[a[b]]){this._fullscreenRequest=a[b];break}var c=this;window.addEventListener("resize",function(a){return c._onResize(a)},!1),window.addEventListener("orientationchange",function(a){return c._onOrientation(a)},!1),document.addEventListener("webkitfullscreenchange",function(a){return c._onFullscreen(a)},!1),document.addEventListener("mozfullscreenchange",function(a){return c._onFullscreen(a)},!1),document.addEventListener("fullscreenchange",function(a){return c._onFullscreen(a)},!1)},b.setSmoothingEnabled=function(a){var b=this.canvas.getContext("2d");b.imageSmoothingEnabled=a,b.mozImageSmoothingEnabled=a,b.oImageSmoothingEnabled=a,b.webkitImageSmoothingEnabled=a,b.msImageSmoothingEnabled=a},b.setImageRenderingCrisp=function(){var a=this.canvas;a.style["image-rendering"]="optimizeSpeed",a.style["image-rendering"]="crisp-edges",a.style["image-rendering"]="-moz-crisp-edges",a.style["image-rendering"]="-webkit-optimize-contrast",a.style["image-rendering"]="optimize-contrast",a.style.msInterpolationMode="nearest-neighbor"},b.setImageRenderingBicubic=function(){var a=this.canvas;a.style["image-rendering"]="auto",a.style.msInterpolationMode="bicubic"},b.setUserSelect=function(a){var b=this.canvas;a=a||"none",b.style["-webkit-touch-callout"]=a,b.style["-webkit-user-select"]=a,b.style["-khtml-user-select"]=a,b.style["-moz-user-select"]=a,b.style["-ms-user-select"]=a,b.style["user-select"]=a,b.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)"},b.setTouchAction=function(a){var b=this.canvas;a=a||"none",b.style.msTouchAction=a,b.style["ms-touch-action"]=a,b.style["touch-action"]=a},b.setBackgroundColor=function(a){a=a||"rgb(0,0,0)",canvas.style.backgroundColor=a},b.setBackgroundImage=function(a){a=a||"none",canvas.style.backgroundImage=a},b.isPortrait=function(){return 0===this.orientation||180==this.orientation},b.isLandscape=function(){return 90===this.orientation||-90===this.orientation},b.isFullscreen=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},b.startFullscreen=function(){this._fullscreenRequest&&!this.isFullscreen()&&(this._width=this.width,this._height=this.height,window.Element&&Element.ALLOW_KEYBOARD_INPUT?this.canvas[this._fullscreenRequest](Element.ALLOW_KEYBOARD_INPUT):this.canvas[this._fullscreenRequest]())},b.stopFullscreen=function(){this.isFullscreen()&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.mozExitFullscreen&&document.mozExitFullscreen())},b._onResize=function(a){this.dispatchEvent("resize")},b._onOrientation=function(a){this.orientation=window.orientation,this.dispatchEvent("orientation"),this.dispatchEvent(this.isPortrait()?"enterportrait":"enterlandscape")},b._onFullscreen=function(a){this.isFullscreen()?this.dispatchEvent("enterfullscreen"):(this.width=this._width,this.height=this._height,this.canvas.width=this._width,this.canvas.height=this._height,this.dispatchEvent("exitfullscreen"))},creatine.DisplayManager=createjs.promote(a,"EventDispatcher")}(),function(){"use strict";var a=function(a){this.game=a},b=a.prototype;b._setAnchor=function(a,b,c){var d=a.getBounds()||{},e=d.width||0,f=d.height||0;b===creatine.LEFT?a.regX=0:b===creatine.CENTER?a.regX=e/2:b===creatine.RIGHT?a.regX=e:a.regX=b,c===creatine.TOP?a.regY=0:c===creatine.CENTER?a.regY=f/2:c===creatine.BOTTOM?a.regY=f:a.regY=c},b._setProperties=function(a,b){for(var c in b)"regX"!==c&&"regY"!==c&&(a[c]=b[c]);this._setAnchor(a,b.regX,b.regY)},b._getResource=function(a){var b=a;if("string"==typeof a&&(b=this.game.load.get(a),!b&&!a.startsWith("data:")))throw Error('Resource "'+a+"\" couldn't be found.");return b},b.bitmap=function(a,b){var c=this._getResource(a),d=new createjs.Bitmap(c);return b&&this._setProperties(d,b),d},b.spritesheet=function(a,b){var c=this._getResource(a),d=new createjs.SpriteSheet(c);return b&&this._setProperties(d,b),c},b.sprite=function(a,b,c){var d=this._getResource(a),e=new createjs.Sprite(d,b);return c&&this._setProperties(e,c),e},b.tilemap=function(a,b){var c=this._getResource(a),d=new creatine.tmx.Map(c);return b&&this._setProperties(d,b),d},b.bitmaptext=function(a,b,c){var d=this._getResource(a),e=new createjs.BitmapText(b,d);return c&&this._setProperties(e,c),e},b.text=function(a,b){var c=new createjs.Text(a);return b&&this._setProperties(c,b),c},b.shape=function(a){var b=new createjs.Shape;return a&&this._setProperties(b,a),b},b.circle=function(a,b,c){var d=new createjs.Shape;return d.graphics.f(b||"white").dc(0,0,a),c&&this._setProperties(d,c),d},b.box=function(a,b,c,d){var e=new createjs.Shape;return e.graphics.f(c||"white").r(-a/2,-b/2,a,b),d&&this._setProperties(e,d),e},creatine.FactoryManager=a}(),function(){"use strict";var a=function(a){this.game=a,this._cache={},this._processQueue=[],this.basePath="",this._initializeConfig(a.config.resources||{}),this._loader=new createjs.LoadQueue(!1),this._loader.installPlugin(createjs.Sound),this._loader.on("complete",this._postProcess,this)},b=a.prototype;b._initializeConfig=function(a){a.base_path&&"string"==typeof a.base_path&&(this.basePath=a.base_path,this.basePath.endsWith("/")||(this.basePath+="/"))},b._postProcess=function(){for(var a=0;a<this._processQueue.length;a++){var b=this._processQueue[a],c=this._loader.getResult(b.id);switch(b.type){case"spritesheet":b.data.images=[c];var d=new createjs.SpriteSheet(b.data);break;case"audio":b.data&&b.data.group&&this.game.sound.add(b.id,b.data.group);break;case"audiosprite":if(b.data)for(var e=b.data,f=0;f<e.length;f++){var g=e[f];g.group&&this.game.sound.add(g.id,g.group)}}d&&(this._cache[b.id]=d)}},b.on=function(a,b,c){this._loader.on(a,b,c)},b.off=function(a,b){this._loader.off(a,b)},b.load=function(){this._loader.load()},b.get=function(a){return"undefined"!=typeof this._cache[a]?this._cache[a]:this._loader.getResult(a)},b.isFinished=function(){return this._loader._numItems===this._loader._numItemsLoaded},b.image=function(a,b){this._loader.loadFile({id:a,src:this.basePath+b,type:"image"},!1)},b.spritesheet=function(a,b,c){"string"==typeof b&&b.endsWith(".json")?this._loader.loadFile({id:a,src:this.basePath+b,type:"spritesheet"},!1):(this._loader.loadFile({id:a,src:this.basePath+b,data:c},!1),this._processQueue.push({id:a,data:c,type:"spritesheet"}))},b.audio=function(a,b,c){this._loader.loadFile({id:a,src:this.basePath+b},!1),this._processQueue.push({id:a,data:c,type:"audio"})},b.audiosprite=function(a,b,c){this._loader.loadFile({id:a,src:this.basePath+b},!1);for(var d=[],e=0;e<c.length;e++){var f=c[e];d.push({id:f.id,startTime:f.start,duration:f.duration})}this._processQueue.push({id:a,data:c,type:"audiosprite"}),createjs.Sound.registerSounds([{src:this.basePath+b,data:{audioSprite:d}}],"")},b.json=function(a,b){this._loader.loadFile({id:a,src:this.basePath+b},!1)},b.script=function(a,b){this._loader.loadFile({id:a,src:this.basePath+b},!1)},b.css=function(a,b){this._loader.loadFile({id:a,src:this.basePath+b},!1)},b.manifest=function(a){for(var b=0;b<a.length;b++){var c=a[b];"audio"===c.type?this.audio(c.id,c.src,c.data):"audiosprite"===c.type?this.audiosprite(c.id,c.src,c.data):"spritesheet"===c.type?this.spritesheet(c.id,c.src,c.data):this.raw(c)}this._loader.loadManifest(a,!1)},b.raw=function(a){this._loader.loadFile(a,!1)},creatine.ResourceManager=a}(),function(){"use strict";var a=function(a){if(this.game=a,this._persistent=!0,this._storage=a.storage,this._groups={},this._persistent){var b=this._storage.iget("sound","volume"),c=this._storage.iget("sound","mute");b===parseFloat(b)&&(this.volume=b),createjs.Sound.setMute(!!c)}},b=a.prototype;b.getVolume=function(){return createjs.Sound.getVolume()},b.setVolume=function(a){var a=creatine.clip(a,0,1);createjs.Sound.setVolume(a),this._persistent&&this._storage.iset("sound","volume",a)},b.getPersistent=function(){return this._persistent},b.setPersistent=function(a){this._persistent=a,this._persistent&&this._storage.iset("sound","volume",this.getVolume)},b.add=function(a,b){if(!a)throw new Error("Sound name is mandatory.");if(!b)throw new Error("Group name is mandatory.");this._groups[b]||(this._groups[b]=[]),this._groups[b].push(a)},b.remove=function(a,b){if(!a)throw new Error("Sound name is mandatory.");if(!b)throw new Error("Group name is mandatory.");var c=this._groups[b];if(c)for(var d=0;d<c.length;d++)if(c[d]==a)return void c.splice(d,1)},b.play=function(a,b,c,d,e,f,g){var h=this._groups[a];if(h){var i=creatine.randomInt(0,h.length-1);a=h[i]}return createjs.Sound.play(a,b,c,d,e,f,g)},b.toogleMute=function(){if(createjs.Sound.getMute())var a=!1;else var a=!0;createjs.Sound.setMute(a),this._storage.iset("sound","mute",a)},b.isMute=function(){return createjs.Sound.getMute()};try{Object.defineProperties(b,{volume:{get:b.getVolume,set:b.setVolume},persistent:{get:b.getPersistent,set:b.setPersistent}})}catch(c){}creatine.SoundManager=a}(),function(){"use strict";var a=function(a){this.EventDispatcher_constructor(),this.game=a,this.delta=0,this.fdelta=0,createjs.Ticker.on("tick",this._onTick,this)},b=createjs.extend(a,createjs.EventDispatcher);b._onTick=function(a){this.delta=a.delta,this.fdelta=a.delta/1e3,this.dispatchEvent(a)},creatine.TimeManager=createjs.promote(a,"EventDispatcher")}(),function(){"use strict";var a=function(a){this.game=a,this._memory=localStorage,this._namespace=a.config.project;try{!!localStorage.getItem}catch(b){this._memory={}}},b=a.prototype;b.iset=function(a,b,c){this.set("["+a+"]"+b,c)},b.iget=function(a,b){return this.get("["+a+"]"+b)},b.iremove=function(a,b){this.remove("["+a+"]"+b)},b.set=function(a,b){try{b=JSON.stringify(b)}catch(c){}this._memory[this._namespace+a]=b},b.get=function(a){var b=this._memory[this._namespace+a];try{b=JSON.parse(b)}catch(c){}return b},b.remove=function(a){delete this._memory[this._namespace+a]},creatine.StorageManager=a}(),function(){"use strict";var a=function(a){this.game=a,this._plugins={}},b=a.prototype;b.preUpdate=function(){for(var a in this._plugins)this._plugins[a].active&&this._plugins[a].hasPreUpdate&&this._plugins[a].preUpdate()},b.update=function(){for(var a in this._plugins)this._plugins[a].active&&this._plugins[a].hasUpdate&&this._plugins[a].update()},b.postUpdate=function(){for(var a in this._plugins)this._plugins[a].active&&this._plugins[a].hasPostUpdate&&this._plugins[a].postUpdate()},b.preDraw=function(){for(var a in this._plugins)this._plugins[a].active&&this._plugins[a].hasPreDraw&&this._plugins[a].preDraw()},b.draw=function(){for(var a in this._plugins)this._plugins[a].active&&this._plugins[a].hasDraw&&this._plugins[a].draw()},b.postDraw=function(){for(var a in this._plugins)this._plugins[a].active&&this._plugins[a].hasPostDraw&&this._plugins[a].postDraw()},b.add=function(a,b){if(!a)throw Error("No id provided");if(!b)throw Error("No plugin provided");"function"==typeof b&&(b=new b),b.game=this.game,b.manager=this,b.preUpdate&&(b.hasPreUpdate=!0),b.update&&(b.hasUpdate=!0),b.postUpdate&&(b.hasPostUpdate=!0),b.preDraw&&(b.hasPreDraw=!0),b.draw&&(b.hasDraw=!0),b.postDraw&&(b.hasPostDraw=!0),this._plugins[a]&&this.remove(a),this._plugins[a]=b,b.enter()},b.get=function(a){return this._plugins[a]},b.remove=function(a){var b=this._plugins[a];b&&(b.exit(),delete this._plugins[a])},b.removeAll=function(){for(var a in this._plugins)this._plugins[a].exit();this._plugins={}},creatine.PluginManager=a}(),function(){"use strict";var a=function(){this.game,this.manager,this.active=!0,this.hasPreUpdate=!1,this.hasUpdate=!1,this.hasPostUpdate=!1,this.hasPreDraw=!1,this.hasDraw=!1,this.hasPostDraw=!1,this.initialize()},b=a.prototype;b.initialize=function(){},b.enter=function(){},b.exit=function(){},creatine.Plugin=a,creatine._plugin=function(a){var b=function(){this.Plugin_constructor()},c=createjs.extend(b,creatine.Plugin);for(var d in a)c[d]=a[d];return createjs.promote(b,"Plugin")}}(),this.creatine.buttons={LEFT:0,MIDDLE:1,RIGHT:2},this.creatine.keys={BACKSPACE:8,TAB:9,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFTWINDOWKEY:91,RIGHTWINDOWKEY:92,CONTEXTMENU:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,MULTIPLY:106,ADD:107,SEPARATOR:108,SUBTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NUMLOCK:144,SCROLLLOCK:145,SEMICOLON:186,EQUAL:187,COMMA:188,DASH:189,PERIOD:190,SLASH:191,GRAVEACCENT:192,OPENBRACKET:219,BACKSLASH:220,CLOSEBRAKET:221,QUOTE:222},this.creatine.pad={A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,SELECT:8,START:9,LEFTSTICK:10,RIGHTSTICK:11,UP:12,DOWN:13,LEFT:14,RIGHT:15,META:16},function(){"use strict";var a=function(a){this.EventDispatcher_constructor(),this.game=a,this._gamepads=[null,null,null,null],this.gamepads=[new creatine.Gamepad(this,a),new creatine.Gamepad(this,a),new creatine.Gamepad(this,a),new creatine.Gamepad(this,a)];var b=this;window.addEventListener("gamepadconnected",function(a){b._onGamepadConnected(a)},!1),window.addEventListener("gamepaddisconnected",function(a){b._onGamepadDisconnected(a)},!1);for(var c=this._getGamepads(),d=0;d<c.length;d++)c[d]&&this._onGamepadConnected({gamepad:c[d]})},b=createjs.extend(a,createjs.EventDispatcher);b._getGamepads=function(){if(navigator.getGamepads)var a=navigator.getGamepads();else if(navigator.webkitGetGamepads)var a=navigator.webkitGetGamepads();else if(navigator.msGetGamepads)var a=navigator.msGetGamepads();else if(navigator.webkitGamepads)var a=navigator.webkitGamepads();else var a=[];return a},b._makeEvent=function(a,b,c){var d=new createjs.Event(a);return d.gamepad=c,d.nativeEvent=b,d},b._onGamepadConnected=function(a){for(var b=0;b<this.gamepads.length;b++)if(!this.gamepads[b].connected){this.gamepads[b].bind(a.gamepad),this.dispatchEvent(this._makeEvent("gamepadconnected",a,this.gamepads[b]));break}},b._onGamepadDisconnected=function(a){for(var b=0;b<this.gamepads.length;b++)if(this.gamepads[b]._gamepad===a.gamepad){this.gamepads[b].unbind(),this.dispatchEvent(this._makeEvent("gamepaddisconnected",a,this.gamepads[b]));break}},b.preUpdate=function(){this._gamepads=this._getGamepads();for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].preUpdate()},b.postUpdate=function(){for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].postUpdate()},b.get=function(a){return this.gamepads[a]},b.getNumGamepads=function(){for(var a=0,b=0;b<this.gamepads.length;b++)this.gamepads[b].connected&&a++;return a},b.getConnectedGamepads=function(){for(var a=[],b=0;b<this.gamepads.length;b++)this.gamepads[b].connected&&a.push(this.gamepads[b]);return a},creatine.GamepadManager=createjs.promote(a,"EventDispatcher")}(),function(){"use strict";var a=function(a){this.EventDispatcher_constructor(),this.game=a,this._lastState=[],this._state=[];var b=this;this.game.canvas.addEventListener("blur",function(a){b._onBlur(a)},!1),this.game.canvas.addEventListener("keydown",function(a){b._onKeyDown(a)},!1),this.game.canvas.addEventListener("keypress",function(a){b._onKeyPress(a)},!1),this.game.canvas.addEventListener("keyup",function(a){b._onKeyUp(a)},!1)},b=createjs.extend(a,createjs.EventDispatcher);b._makeEvent=function(a,b){var c=new createjs.Event(a);return c.code=b.keyCode,c.shift=b.shiftKey,c.ctrl=b.ctrlKey,c.meta=b.metaKey,c.alt=b.altKey,c.nativeEvent=b,c},b._onBlur=function(){this._state=[]},b._onKeyDown=function(a){if(a.repeat)var b=this._makeEvent("keyhold",a);else{this._state.push(a.keyCode);var b=this._makeEvent("keydown",a)}return this.dispatchEvent(b),a.preventDefault(),!1},b._onKeyPress=function(a){return a.preventDefault(),!1},b._onKeyUp=function(a){this._state.splice(this._state.indexOf(a.keyCode),1);var b=this._makeEvent("keyup",a);return this.dispatchEvent(b),a.preventDefault(),!1},b._get=function(a,b){return b.indexOf(a)>=0},b.postUpdate=function(){this._lastState=this._state.slice()},b.isDown=function(a){return this._get(a,this._state)},b.isUp=function(a){return!this._get(a,this._state)},b.isPressed=function(a){return this._get(a,this._state)&&!this._get(a,this._lastState)},b.isReleased=function(a){return!this._get(a,this._state)&&this._get(a,this._lastState)},b.isAnyDown=function(){return this._state.length>0},b.isAnyPressed=function(){for(var a=0;a<this._state.length;a++){var b=this._state[a];if(!this._get(b,this._lastState))return!0}return!1},b.isAnyReleased=function(){for(var a=0;a<this._lastState.length;a++){var b=this._lastState[a];if(!this._get(b,this._state))return!0}return!1},creatine.KeyboardManager=createjs.promote(a,"EventDispatcher")}(),function(){"use strict";var a=function(a){this.EventDispatcher_constructor(),this.game=a,this._lastState=[],this._state=[],this.x=0,this.y=0;var b=this;this.game.canvas.addEventListener("blur",function(a){b._onBlur(a)},!1),this.game.canvas.addEventListener("click",function(a){b._onClick(a)},!1),this.game.canvas.addEventListener("dblclick",function(a){b._onDblClick(a)},!1),this.game.canvas.addEventListener("mousedown",function(a){b._onMouseDown(a)},!1),this.game.canvas.addEventListener("mouseup",function(a){b._onMouseUp(a)},!1),this.game.canvas.addEventListener("mousemove",function(a){b._onMouseMove(a)},!1),this.game.canvas.addEventListener("mouseout",function(a){b._onMouseOut(a)},!1),this.game.canvas.addEventListener("mouseover",function(a){b._onMouseOver(a)},!1),this.game.canvas.addEventListener("wheel",function(a){b._onWheel(a)},!1)},b=createjs.extend(a,createjs.EventDispatcher);b._makeEvent=function(a,b){var c=new createjs.Event(a);return c.button=b.button,c.x=this.x,c.y=this.y,c.nativeEvent=b,c},b._onBlur=function(a){this._state=[]},b._onClick=function(a){var b=this._makeEvent("click",a);return this.dispatchEvent(b),a.preventDefault(),!1},b._onDblClick=function(a){var b=this._makeEvent("dblclick",a);return this.dispatchEvent(b),a.preventDefault(),!1},b._onMouseDown=function(a){var b=this._makeEvent("mousedown",a);return this.dispatchEvent(b),this._state.push(a.button),a.preventDefault(),!1},b._onMouseUp=function(a){var b=this._makeEvent("mouseup",a);return this.dispatchEvent(b),this._state.splice(this._state.indexOf(a.button),1),a.preventDefault(),!1},b._onMouseMove=function(a){var b=this._makeEvent("mousemove",a);return this.dispatchEvent(b),a.preventDefault(),!1},b._onMouseOut=function(a){var b=this._makeEvent("mouseout",a);return this.dispatchEvent(b),a.preventDefault(),!1},b._onMouseOver=function(a){var b=this._makeEvent("mouseover",a);return this.dispatchEvent(b),a.preventDefault(),!1},b._onWheel=function(a){var b=new createjs.Event("wheel");return b.deltaMode=a.deltaMode,b.deltaX=a.deltaX||a.wheelDeltaX,b.deltaY=a.deltaY||a.wheelDeltaY,b.deltaZ=a.deltaZ||a.wheelDeltaZ,b.x=a.x,b.y=a.y,this.dispatchEvent(b),a.preventDefault(),!1},b._get=function(a,b){return b.indexOf(a)>=0},b.preUpdate=function(){this.x=this.game.stage.mouseX,this.y=this.game.stage.mouseY;

},b.postUpdate=function(){this._lastState=this._state.slice()},b.isDown=function(a){return this._get(a,this._state)},b.isUp=function(a){return!this._get(a,this._state)},b.isPressed=function(a){return this._get(a,this._state)&&!this._get(a,this._lastState)},b.isReleased=function(a){return!this._get(a,this._state)&&this._get(a,this._lastState)},b.isAnyDown=function(){return this._state.length>0},b.isAnyPressed=function(){for(var a=0;a<this._state.length;a++){var b=this._state[a];if(!this._get(b,this._lastState))return!0}return!1},b.isAnyReleased=function(){for(var a=0;a<this._lastState.length;a++){var b=this._lastState[a];if(!this._get(b,this._state))return!0}return!1},creatine.MouseManager=createjs.promote(a,"EventDispatcher")}(),function(){"use strict";var a=function(a){this.game=a,this.touches=[];for(var b=0;10>b;b++)this.touches.push(new creatine.Touch(this,a));var c=this;this.game.canvas.addEventListener("blur",function(a){c._onBlur(a)},!1),this.game.canvas.addEventListener("touchstart",function(a){c._onTouchStart(a)},!1),this.game.canvas.addEventListener("touchmove",function(a){c._onTouchMove(a)},!1),this.game.canvas.addEventListener("touchend",function(a){c._onTouchEnd(a)},!1),this.game.canvas.addEventListener("touchcancel",function(a){c._onBlur(a)},!1)},b=createjs.extend(a,createjs.EventDispatcher);b._onBlur=function(a){for(var b=0;b<this.touches.length;b++)this.touches[b]._endTouch()},b._onTouchStart=function(a){for(var b=0;b<a.changedTouches.length;b++)for(var c=a.changedTouches[b].identifier,d=0;d<this.touches.length;d++)if(!this.touches[d].down||this.touches[d].identifier===c){this.touches[d]._startTouch(a.changedTouches[b]);break}return a.preventDefault(),!1},b._onTouchMove=function(a){for(var b=0;b<a.changedTouches.length;b++)for(var c=a.changedTouches[b].identifier,d=0;d<this.touches.length;d++)if(this.touches[d].identifier===c){this.touches[d]._updateTouch(a.changedTouches[b]);break}return a.preventDefault(),!1},b._onTouchEnd=function(a){for(var b=0;b<a.changedTouches.length;b++)for(var c=a.changedTouches[b].identifier,d=0;d<this.touches.length;d++)if(this.touches[d].identifier===c){this.touches[d]._endTouch(a.changedTouches[b]);break}return a.preventDefault(),!1},b.get=function(a){return this.touches[a]},b.getNumTouches=function(){for(var a=0,b=0;b<this.touches.length;b++)this.touches[b].down&&a++;return a},b.getDownTouches=function(){for(var a=[],b=0;b<this.touches.length;b++)this.touches[b].down&&a.push(this.touches[b]);return a},creatine.TouchManager=createjs.promote(a,"EventDispatcher")}(),function(){"use strict";var a=function(a,b){this.game=b,this.manager=a,this.down=!1,this.identifier=-1,this.x=0,this.y=0,this.force=0,this.radiusX=0,this.radiusY=0,this.rotation=0},b=createjs.extend(a,createjs.EventDispatcher);b._makeEvent=function(a,b){var c=new createjs.Event(a);return c.target=this,c},b._update=function(a){if(a){var b=this.game.stage._getElementRect(this.game.canvas),b=this.game.stage._getElementRect(this.game.canvas),c=a.pageX-b.left,d=a.pageY-b.top,e=this.game.canvas.width,f=this.game.canvas.height;c/=(b.right-b.left)/e,d/=(b.bottom-b.top)/f,this.x=c,this.y=d,this.force=a.force||a.webkitForce||0,this.radiusX=a.radiusX||a.webkitRadiusX||0,this.radiusY=a.radiusY||a.webkitRadiusY||0,this.rotation=a.rotationAngle||a.webkitRotationAngle||0}},b._startTouch=function(a){this.down=!0,this.identifier=a.identifier,this._update(a),this.dispatchEvent(this._makeEvent("start"))},b._updateTouch=function(a){this._update(a),this.dispatchEvent(this._makeEvent("move"))},b._endTouch=function(a){this.identifier=-1,this.down=!1,this._update(a),this.dispatchEvent(this._makeEvent("end"))},b.isDown=function(){return this.down},b.isUp=function(){return!this.down},creatine.Touch=createjs.promote(a,"EventDispatcher")}(),function(){"use strict";var a=function(a,b){this.EventDispatcher_constructor(),this.game=b,this.manager=a,this.connected=!1,this.rawLeftStickX=0,this.rawLeftStickY=0,this.leftStickX=0,this.leftStickY=0,this.leftStickForce=0,this.rawRightStickX=0,this.rawRightStickY=0,this.rightStickX=0,this.rightStickY=0,this.rightStickForce=0,this.leftTrigger=0,this.rightTrigger=0,this.deadZoneLeft=.25,this.deadZoneRight=.25,this._lastState=[],this._state=[],this._listening=!0;var c=this;this.game.canvas.addEventListener("blur",function(a){c._onBlur(a)},!1),this.game.canvas.addEventListener("focus",function(a){c._onFocus(a)},!1)},b=createjs.extend(a,createjs.EventDispatcher);b._makeEvent=function(a,b){var c=new createjs.Event(a);return c.target=this,c},b._onBlur=function(a){this._state=[],this._listening=!1},b._onFocus=function(a){this._listening=!0},b._get=function(a,b){return b.indexOf(a)>=0},b.preUpdate=function(){if(this._gamepad&&this._listening){var a=this.rawLeftStickX=this._gamepad.axes[0],b=this.rawLeftStickY=this._gamepad.axes[1],c=this.rawRightStickX=this._gamepad.axes[2],d=this.rawRightStickY=this._gamepad.axes[3],e=this.deadZoneLeft,f=Math.sqrt(a*a+b*b);if(f>e){var g=(f-e)/(1-e);this.leftStickX=a=a/f*g,this.leftStickY=b=b/f*g,this.leftStickForce=Math.sqrt(a*a+b*b),this.leftStickForce>=1&&(this.leftStickX/=this.leftStickForce,this.leftStickY/=this.leftStickForce,this.leftStickForce=1)}else this.leftStickX=this.leftStickY=this.leftStickForce=0;var h=this.deadZoneLeft,i=Math.sqrt(c*c+d*d);if(i>h){var g=(i-h)/(1-h);this.rightStickX=c=c/i*g,this.rightStickY=d=d/i*g,this.rightStickForce=Math.sqrt(c*c+d*d),this.rightStickForce>=1&&(this.rightStickX/=this.rightStickForce,this.rightStickY/=this.rightStickForce,this.rightStickForce=1)}else this.rightStickX=this.rightStickY=this.rightStickForce=0;this.leftTrigger=this._gamepad.buttons[6].value,this.rightTrigger=this._gamepad.buttons[7].value,this._state=[];for(var j=0;j<this._gamepad.buttons.length;j++)this._gamepad.buttons[j].pressed&&this._state.push(j)}},b.postUpdate=function(){this._lastState=this._state.slice()},b.bind=function(a){this.dispatchEvent(this._makeEvent("connected")),this._gamepad=a,this.connected=!0},b.unbind=function(){this.dispatchEvent(this._makeEvent("disconnected")),this._gamepad=null,this.connected=!1,this.rawLeftStickX=0,this.rawLeftStickY=0,this.rawRightStickX=0,this.rawRightStickY=0,this.leftStickX=0,this.leftStickY=0,this.rightStickX=0,this.rightStickY=0,this.leftTrigger=0,this.rightTrigger=0,this._state=[]},b.isDown=function(a){return this._get(a,this._state)},b.isUp=function(a){return!this._get(a,this._state)},b.isPressed=function(a){return this._get(a,this._state)&&!this._get(a,this._lastState)},b.isReleased=function(a){return!this._get(a,this._state)&&this._get(a,this._lastState)},b.isAnyDown=function(){return this._state.length>0},b.isAnyPressed=function(){for(var a=0;a<this._state.length;a++){var b=this._state[a];if(!this._get(b,this._lastState))return!0}return!1},b.isAnyReleased=function(){for(var a=0;a<this._lastState.length;a++){var b=this._lastState[a];if(!this._get(b,this._state))return!0}return!1},creatine.Gamepad=createjs.promote(a,"EventDispatcher")}(),function(){"use strict";var a=function(a){this.game=a,this.stage=a.stage,this._currentIndex=-1,this._sceneStack=[],this._sceneMap={},this._transition=null},b=a.prototype;b._removeFromStack=function(a){var b=this._sceneStack.indexOf(a);b>=0&&(this._currentIndex--,this.stage.removeChild(a),this._sceneStack.splice(b,1))},b._addScene=function(a){var b=this.getCurrentScene();if(b){var c=this.stage.getChildIndex(b);this.stage.addChildAt(a,c+1)}else this.stage.addChild(a);this._sceneStack.push(a),a._preEnter()},b._exitCurrentScene=function(){var a=this.getCurrentScene();a&&(a._exit(),this._sceneStack.splice(this._currentIndex,1),this.stage.removeChild(a),this._currentIndex--)},b._pauseCurrentScene=function(){var a=this.getCurrentScene();a&&a._pause()},b._resumeCurrentScene=function(){var a=this.getCurrentScene();a&&a._resume()},b._enterNextScene=function(){var a=this.getNextScene();a&&(a._enter(),this._currentIndex++)},b._startTransition=function(a,b,c,d){c?(this._transition=c,c.start(this,a||{},b||{},d)):d()},b._completeTransition=function(){this._transition&&this._transition.complete()},b._makeTop=function(a,b){var c=this.stage.getChildIndex(b),d=this.stage.getChildIndex(a);-1===c||-1===d||d>=c||(this.stage.removeChild(a),this.stage.addChildAt(a,c))},b.update=function(){for(var a=0;a<this._sceneStack;a++){var b=this._sceneStack[a];b.paused||b._update()}},b.add=function(a,b){this._sceneMap[a]=b},b.remove=function(a){delete this._sceneMap[a]},b.get=function(a){return"string"==typeof a?this._sceneMap[a]:a},b.replace=function(a,b){function c(){f._transition=null,f._exitCurrentScene(),f._enterNextScene()}this._completeTransition();var d=this.get(a),e=this.getCurrentScene();if(!d||e===d)return!1;e&&e._preExit(),this._removeFromStack(d),this._addScene(d);var f=this;return this._startTransition(e,d,b,c),!0},b.push=function(a,b){function c(){f._transition=null,f._pauseCurrentScene(),f._enterNextScene()}this._completeTransition();var d=this.get(a),e=this.getCurrentScene();if(!d||e===d)return!1;e&&e._prePause(),this._addScene(d);var f=this;return this._startTransition(e,d,b,c),!0},b.pop=function(a){function b(){e._transition=null,e._exitCurrentScene(),e._resumeCurrentScene()}this._completeTransition();var c=this.getPreviousScene(),d=this.getCurrentScene();d&&d._preExit(),c&&c._preResume();var e=this;return this._startTransition(d,c,a,b),!0},b.getPreviousScene=function(){return this._currentIndex>=1?this._sceneStack[this._currentIndex-1]:null},b.getCurrentScene=function(){return this._currentIndex>=0?this._sceneStack[this._currentIndex]:null},b.getNextScene=function(){return this._currentIndex!==this._sceneStack.length-1?this._sceneStack[this._currentIndex+1]:null},b.popAll=function(){this._completeTransition();for(var a=0;a<this._sceneStack.length;a++)this._sceneStack[a]._preExit(),this._sceneStack[a]._exit(),this.stage.removeChild(this._sceneStack[a]);this._currentIndex=-1,this._sceneStack=[]},b.popAllButOne=function(){this._completeTransition();for(var a=0;a<this._sceneStack.length-1;a++)this._sceneStack[a]._preExit(),this._sceneStack[a]._exit(),this.stage.removeChild(this._sceneStack[a]);this._currentIndex=0,this._sceneStack=[this._sceneStack[this._sceneStack.length-1]]},b.inTransition=function(){return null!==this._transition},creatine.SceneManager=a}(),function(){"use strict";var a=function(){this.Container_constructor(),this.started=!1,this.paused=!1,this._initialize()},b=createjs.extend(a,createjs.Container);b._initialize=function(){this.initialize()},b._preEnter=function(){this.preEnter()},b._enter=function(){this.started=!0,this.paused=!1,this.enter()},b._preResume=function(){this.preResume()},b._resume=function(){this.paused=!1,this.resume()},b._prePause=function(){this.paused=!0,this.prePause},b._pause=function(){this.pause()},b._preExit=function(){this.preExit()},b._exit=function(){this.started=!1,this.paused=!0,this.exit()},b._update=function(){this.update()},b.initialize=function(){},b.preEnter=function(){},b.preResume=function(){},b.prePause=function(){},b.preExit=function(){},b.enter=function(){},b.resume=function(){},b.pause=function(){},b.exit=function(){},b.update=function(){},creatine.Scene=createjs.promote(a,"Container"),creatine._scene=function(a){var b=function(){this.Scene_constructor()},c=createjs.extend(b,creatine.Scene);for(var d in a)c[d]=a[d];return createjs.promote(b,"Scene")}}(),function(){"use strict";var a=function(){this.initialize()},b=a.prototype;b.initialize=function(){},b.enter=function(){},b.pause=function(){},b.resume=function(){},b.update=function(){},b.exit=function(){},creatine.System=a,creatine._system=function(a){var b=function(){this.System_constructor()},c=createjs.extend(b,creatine.System);for(k in a)c[k]=a[k];return createjs.promote(b,"System")}}(),function(){"use strict";var a=function(a,b){this.ease=a||createjs.Ease.linear,this.time=b||400},b=a.prototype;b.start=function(a,b,c,d){this.director=a,this.outScene=b,this.inScene=c,this.callback=d,a._makeTop(c,b),c.alpha=0;var e=this;createjs.Tween.get(c,{override:!0}).to({alpha:1},this.time,this.ease).call(function(){e.complete()})},b.complete=function(){createjs.Tween.removeTweens(this.inScene),this.director._makeTop(this.inScene,this.outScene),this.inScene.alpha=1,this.callback()},creatine.transitions.FadeIn=a}(),function(){"use strict";var a=function(a,b){this.ease=a||createjs.Ease.linear,this.time=b||800},b=a.prototype;b.start=function(a,b,c,d){this.director=a,this.outScene=b,this.inScene=c,this.callback=d,b.alpha=1,c.alpha=0;var e=this.time/2,f=this;createjs.Tween.get(c,{override:!0}).wait(e).to({alpha:1},e,this.ease).call(function(){f.complete()}),createjs.Tween.get(b,{override:!0}).to({alpha:0},e,this.ease)},b.complete=function(){createjs.Tween.removeTweens(this.inScene),createjs.Tween.removeTweens(this.outScene),this.director._makeTop(this.inScene,this.outScene),this.outScene.alpha=1,this.inScene.alpha=1,this.callback()},creatine.transitions.FadeInOut=a}(),function(){"use strict";var a=function(a,b){this.ease=a||createjs.Ease.linear,this.time=b||400},b=a.prototype;b.start=function(a,b,c,d){this.director=a,this.outScene=b,this.inScene=c,this.callback=d,a._makeTop(b,c);var e=this;createjs.Tween.get(b,{override:!0}).to({alpha:0},this.time,this.ease).call(function(){e.complete()})},b.complete=function(){createjs.Tween.removeTweens(this.outScene),this.outScene.alpha=1,this.director._makeTop(this.inScene,this.outScene),this.callback()},creatine.transitions.FadeOut=a}(),function(){"use strict";var a=function(a,b,c){this.direction=a||creatine.LEFT,this.ease=b||createjs.Ease.linear,this.time=c||400},b=a.prototype;b.start=function(a,b,c,d){this.director=a,this.outScene=b,this.inScene=c,this.callback=d;var e=a.stage.canvas.width,f=a.stage.canvas.height,g=this.direction;g.endsWith("left")?c.x=-e:g.endsWith("right")&&(c.x=e),g.startsWith("top")?c.y=-f:g.startsWith("bottom")&&(c.y=f),a._makeTop(c,b);var h=this;createjs.Tween.get(c,{override:!0}).to({x:0,y:0},this.time,this.ease).call(function(){h.complete()})},b.complete=function(){createjs.Tween.removeTweens(this.inScene),this.inScene.x=0,this.inScene.y=0,this.director._makeTop(this.inScene,this.outScene),this.callback()},creatine.transitions.MoveIn=a}(),function(){"use strict";var a=function(a,b,c){this.direction=a||creatine.LEFT,this.ease=b||createjs.Ease.linear,this.time=c||400},b=a.prototype;b.start=function(a,b,c,d){this.director=a,this.outScene=b,this.inScene=c,this.callback=d;var e=a.stage.canvas.width,f=a.stage.canvas.height,g=this.direction;this.targetX=0,this.targetY=0,g.endsWith("left")?this.targetX=-e:g.endsWith("right")&&(this.targetX=e),g.startsWith("top")?this.targetY=-f:g.startsWith("bottom")&&(this.targetY=f),a._makeTop(b,c);var h=this;createjs.Tween.get(b,{override:!0}).to({x:this.targetX,y:this.targetY},this.time,this.ease).call(function(){h.complete()})},b.complete=function(){createjs.Tween.removeTweens(this.outScene),this.outScene.x=0,this.outScene.y=0,this.director._makeTop(this.inScene,this.outScene),this.callback()},creatine.transitions.MoveOut=a}(),function(){"use strict";var a=function(a,b,c){this.direction=a||creatine.LEFT,this.ease=b||createjs.Ease.linear,this.time=c||400},b=a.prototype;b.start=function(a,b,c,d){this.director=a,this.outScene=b,this.inScene=c,this.callback=d;{var e=a.stage.canvas.width,f=a.stage.canvas.height;this.direction}switch(this.targetX=0,this.targetY=0,c.x=0,c.y=0,this.direction){case creatine.LEFT:c.x=e,this.targetX=-e;break;case creatine.RIGHT:c.x=-e,this.targetX=e;break;case creatine.TOP:c.y=f,this.targetY=-f;break;case creatine.BOTTOM:c.y=-f,this.targetY=f}var g=this;createjs.Tween.get(c,{override:!0}).to({x:0,y:0},this.time,this.ease).call(function(){g.complete()}),createjs.Tween.get(b,{override:!0}).to({x:this.targetX,y:this.targetY},this.time,this.ease)},b.complete=function(){createjs.Tween.removeTweens(this.inScene),createjs.Tween.removeTweens(this.outScene),this.inScene.x=0,this.inScene.x=0,this.outScene.x=0,this.outScene.y=0,this.callback()},creatine.transitions.Scroll=a}(),function(){"use strict";var a=function(a,b){this.ease=a||createjs.Ease.linear,this.time=b||400},b=a.prototype;b.start=function(a,b,c,d){this.director=a,this.outScene=b,this.inScene=c,this.callback=d;var e=a.stage.canvas.width,f=a.stage.canvas.height;c.scaleX=0,c.scaleY=0,c.x=e/2,c.y=f/2,a._makeTop(c,b);var g=this;createjs.Tween.get(c,{override:!0}).to({x:0,y:0,scaleX:1,scaleY:1},this.time,this.ease).call(function(){g.complete()})},b.complete=function(){createjs.Tween.removeTweens(this.inScene),this.inScene.x=0,this.inScene.y=0,this.inScene.scaleY=1,this.inScene.scaleX=1,this.director._makeTop(this.inScene,this.outScene),this.callback()},creatine.transitions.ZoomIn=a}(),function(){"use strict";var a=function(a,b){this.ease=a||createjs.Ease.linear,this.time=b||1e3},b=a.prototype;b.start=function(a,b,c,d){this.director=a,this.outScene=b,this.inScene=c,this.callback=d;var e=a.stage.canvas.width,f=a.stage.canvas.height;c.x=e/2,c.y=f/2,c.scaleX=0,c.scaleY=0;var g=this.time/2,h=this;createjs.Tween.get(c,{override:!0}).wait(g).to({x:0,y:0,scaleX:1,scaleY:1},g,this.ease).call(function(){h.complete()}),createjs.Tween.get(b,{override:!0}).to({x:e/2,y:f/2,scaleX:0,scaleY:0},g,this.ease)},b.complete=function(){createjs.Tween.removeTweens(this.outScene),this.outScene.x=this.inScene.x=0,this.outScene.y=this.inScene.y=0,this.outScene.scaleX=this.inScene.scaleX=1,this.outScene.scaleY=this.inScene.scaleY=1,this.director._makeTop(this.inScene,this.outScene),this.callback()},creatine.transitions.ZoomInOut=a}(),function(){"use strict";var a=function(a,b){this.ease=a||createjs.Ease.linear,this.time=b||400},b=a.prototype;b.start=function(a,b,c,d){this.director=a,this.outScene=b,this.inScene=c,this.callback=d;var e=a.stage.canvas.width,f=a.stage.canvas.height;a._makeTop(b,c);var g=this;createjs.Tween.get(b,{override:!0}).to({x:e/2,y:f/2,scaleX:0,scaleY:0},this.time,this.ease).call(function(){g.complete()})},b.complete=function(){createjs.Tween.removeTweens(this.outScene),this.outScene.x=0,this.outScene.y=0,this.outScene.scaleY=1,this.outScene.scaleX=1,this.director._makeTop(this.inScene,this.outScene),this.callback()},creatine.transitions.ZoomOut=a}(),function(){"use strict";var a=function(a,b){this.Container_constructor(),this._active=!1,this._emissionTime=0,this._elapsed=0,this._duration=0,this._counter=0,this._images=[],this._maxParticles=0,this._particles=[],this.emissionRate=100,this.angle=0,this.angleVar=45,this.emitX=0,this.emitXVar=0,this.emitY=0,this.emitYVar=0,this.life=1e3,this.lifeVar=0,this.startAlpha=1,this.startAlphaVar=0,this.endAlpha=0,this.endAlphaVar=0,this.startRotation=0,this.startRotationVar=0,this.endRotation=0,this.endRotationVar=0,this.startScale=1,this.startScaleVar=0,this.endScale=0,this.endScaleVar=0,this.speed=100,this.speedVar=0,this.gravityX=0,this.gravityY=0,this.radAccel=0,this.radAccelVar=0,this.tanAccel=0,this.tanAccelVar=0,this._initialize(a,b)},b=createjs.extend(a,createjs.Container);b._initialize=function(a,b){this._maxParticles=b,a.length||(a=[a]),this._particles=[];for(var c=0;b>c;)for(var d=0;d<a.length&&b>c;d++){var e=a[d].clone();e.visible=!1,e.angle=0,e.startLife=0,e.life=0,e.dirX=0,e.dirY=0,e.deltaAlpha=0,e.startRotation=0,e.deltaRotation=0,e.startScale=0,e.deltaScale=0,e.speed=0,e.gravityX=0,e.gravityY=0,e.radAccel=0,e.tanAccel=0,this.addChild(e),this._particles.push(e),c++}tine.shuffle(this._particles)},b._addParticle=function(){var a,b=this._particles[this._counter++],c=Math.cos,d=Math.sin,e=Math.abs,f=tine.randomPolar,g=tine.clip,h=g(this.endAlpha+this.endAlphaVar*f(),0,1),i=this.endRotation+this.endRotationVar*f(),j=this.endScale+this.endScaleVar*f();b.visible=!0,b.startLife=b.life=e(this.life+this.lifeVar*f()),b.alpha=g(this.startAlpha+this.startAlphaVar*f(),0,1),b.x=this.emitX+this.emitXVar*f(),b.y=this.emitY+this.emitYVar*f(),a=.0174532925*(this.angle+this.angleVar*f()),b.dirX=c(a),b.dirY=d(a),b.speed=this.speed+this.speedVar*f(),b.rotation=this.startRotation+this.startRotationVar*f(),b.scaleX=b.scaleY=this.startScale+this.startScaleVar*f(),b.deltaAlpha=(h-b.alpha)/b.life,b.deltaRotation=(i-b.rotation)/b.life,b.deltaScale=(j-b.scaleX)/b.life,b.gravityX=this.gravityX,b.gravityY=this.gravityY,b.radAccel=this.radAccel+this.radAccelVar*f(),b.tanAccel=this.tanAccel+this.tanAccelVar*f()},b.update=function(a){if(a){var b=a/1e3;if(this._active){var c=1e3/this.emissionRate;for(this._emissionTime+=a;this._counter<this._maxParticles&&this._emissionTime>c;)this._addParticle(),this._emissionTime-=c;this._elapsed+=a,-1!=this._duration&&this._duration<this._elapsed&&(this._active=!1)}for(var d,e,f,g,h,i,j,k,l,m=0,n=this._counter,o=this._particles,p=Math.sqrt;n>m;)d=o[m],d.life-=a,d.life<=0?(d.visible=!1,n--,o[m]=o[n],o[n]=d):(e=d.life/d.startLife,d.x||d.y?(f=p(d.x*d.x+d.y*d.y),g=d.x/f,h=d.y/f):(g=0,h=0),i=g*d.radAccel,k=h*d.radAccel,j=-h*d.tanAccel,l=g*d.tanAccel,d.dirX+=(i+j+d.gravityX)*b,d.dirY+=(k+l+d.gravityY)*b,d.alpha+=d.deltaAlpha*a,d.scaleX+=d.deltaScale*a,d.scaleY=d.scaleX,d.rotation+=d.deltaRotation*a,d.x+=d.dirX*d.speed*b,d.y+=d.dirY*d.speed*b,m++);this._counter=n}},b.start=function(a,b,c){a=a||-1,this.emitX="undefined"==typeof b?this.emitX:b,this.emitY="undefined"==typeof c?this.emitY:c,this._duration=a,this._elapsed=0,this._active=!0},creatine.Emitter=createjs.promote(a,"Container")}(),function(){"use strict";var a=function(a){this.firstgid=null,this.name=null,this.width=null,this.height=null,this.tileWidth=null,this.tileHeight=null,this.imagePath=null,this.tileOffsetX=null,this.tileOffsetY=null,this.spacing=null,this.margin=null,this.properties=null,this.tileProperties=null,this.spritesheet=null,this.animations=null,this._initialize(a)},b=a.prototype;b._initialize=function(a){if(this.firstgid=a.firstgid,this.name=a.name,this.imagePath=a.image,this.width=a.imagewidth,this.height=a.imageheight,this.tileWidth=a.tilewidth||32,this.tileHeight=a.tileheight||32,this.spacing=a.spacing||0,this.margin=a.margin||0,this.properties=a.properties,this.tileProperties=a.tileproperties,this.tileOffsetX=0,this.tileOffsetY=0,this.animations={},a.tileoffset&&(this.tileOffsetX=a.tileoffset.x,this.tileOffsetY=a.tileoffset.y),a.tiles)for(var b in a.tiles){var c=a.tiles[b];if(c.animation){for(var d=[],e=[],f=0;f<c.animation.length;f++)d.push(c.animation[f].tileid),e.push(c.animation[f].duration);this.animations["anim-"+b]={frames:d,speed:e[0]/1e3}}}this._loadSpriteSheet()},b._loadSpriteSheet=function(){if(this.imagePath){var a={images:[this.imagePath],frames:{width:this.tileWidth,height:this.tileHeight,regX:-this.tileOffsetX,regY:this.tileHeight-this.tileOffsetY,spacing:this.spacing,margin:this.margin},animations:this.animations};this.spritesheet=new createjs.SpriteSheet(a)}},creatine.tmx.Tileset=a}(),function(){"use strict";var a=function(a,b){this.map=null,this.name=null,this.data=null,this.width=null,this.height=null,this._initialize(a,b)},b=createjs.extend(a,createjs.Container);b._initialize=function(a,b){this.Container_constructor(),a&&(this.map=a,this.name=b.name,this.data=b.data,this.x=b.x,this.y=b.y,this.width=b.width,this.height=b.height,this.visible=b.visible,this.alpha=b.opacity,this._createTiles())},b._createTiles=function(){throw new Error("TileLayer._createTiles not implemented.")},b.getTile=function(a,b){return this.data[this.width*b+a]},b.setTile=function(a,b,c){var d=this.width*b+a,e=this.map.getTilesetByGid(c),f=c-e.firstgid,g=this.getChildAt(d);this.data[d]=f,e.animations["anim-"+f]?g.gotoAndPlay("anim-"+f):g.gotoAndStop(f)},b.getCoords=function(a,b){throw new Error("TileLayer.getCoords not implemented.")},b.getPosition=function(a,b){throw new Error("TileLayer.getPosition not implemented.")},creatine.tmx.TileLayer=createjs.promote(a,"Container")}(),function(){"use strict";var a=function(a,b){this.TileLayer_constructor(a,b)},b=createjs.extend(a,creatine.tmx.TileLayer);b._createTiles=function(){var a=this.map.renderOrder,b=0,c=0,d=this.width,e=this.height,f=1,g=1,h=this.map.tileWidth,i=this.map.tileHeight;("left-down"==a||"left-up"==a)&&(b=this.width-1,d=0,f=-1),("right-up"==a||"left-up"==a)&&(c=this.height-1,e=0,g=-1);for(var j=c;j!=e;j+=g)for(var k=b;k!=d;k+=f){var l=this.width*j+k,m=this.data[l];if(!(0>=m)){var n=this.map.getTilesetByGid(m),o=new createjs.Sprite(n.spritesheet),p=m-n.firstgid;n.animations["anim-"+p]?o.gotoAndPlay("anim-"+p):o.gotoAndStop(p),o.x=k*h,o.y=j*h+i,this.addChild(o)}}},b.getCoords=function(a,b){return new createjs.Point(Math.floor(a/this.map.tileWidth),Math.floor(b/this.map.tileHeight))},b.getPosition=function(a,b){return new createjs.Point(Math.floor(a*this.map.tileWidth),Math.floor(b*this.map.tileHeight))},creatine.tmx.OrthogonalTileLayer=createjs.promote(a,"TileLayer")}(),function(){"use strict";var a=function(a,b){this.TileLayer_constructor(a,b)},b=createjs.extend(a,creatine.tmx.TileLayer);b._createTiles=function(){{var a=this.map.renderOrder,b=0,c=0,d=this.width,e=this.height,f=1,g=1;this.map.tileWidth,this.map.tileHeight}("left-down"==a||"left-up"==a)&&(b=this.width-1,d=0,f=-1),("right-up"==a||"left-up"==a)&&(c=this.height-1,e=0,g=-1);for(var h=c;h!=e;h+=g)for(var i=b;i!=d;i+=f){var j=this.width*h+i,k=this.data[j];if(!(0>=k)){var l=this.map.getTilesetByGid(k),m=new createjs.Sprite(l.spritesheet),n=k-l.firstgid;l.animations["anim-"+n]?m.gotoAndPlay("anim-"+n):m.gotoAndStop(n),m.x=(i-h-1)*(this.map.tileWidth/2),m.y=(i+h+2)*(this.map.tileHeight/2),this.addChild(m)}}},b.getCoords=function(a,b){return new createjs.Point(Math.floor(a/this.map.tileWidth+b/this.map.tileHeight),Math.floor(-a/this.map.tileWidth+b/this.map.tileHeight))},b.getPosition=function(a,b){return new createjs.Point((a-b-1)*(this.map.tileWidth/2),(a+b+2)*(this.map.tileHeight/2))},creatine.tmx.IsometricTileLayer=createjs.promote(a,"TileLayer")}(),function(){"use strict";var a=function(a,b){this.TileLayer_constructor(a,b)},b=createjs.extend(a,creatine.tmx.TileLayer);b._createTiles=function(){var a=this.map.renderOrder,b=0,c=0,d=this.width,e=this.height,f=1,g=1,h=this.map.tileWidth,i=this.map.tileHeight;("left-down"==a||"left-up"==a)&&(b=this.width-1,d=0,f=-1),("right-up"==a||"left-up"==a)&&(c=this.height-1,e=0,g=-1);for(var j=c;j!=e;j+=g)for(var k=b;k!=d;k+=f){var l=this.width*j+k,m=this.data[l];if(!(0>=m)){var n=this.map.getTilesetByGid(m),o=new createjs.Sprite(n.spritesheet),p=m-n.firstgid;n.animations["anim-"+p]?o.gotoAndPlay("anim-"+p):o.gotoAndStop(p),o.x=h*(k+j%2/2-.5),o.y=i*(j/2+1),this.addChild(o)}}},b.getCoords=function(a,b){var c=Math.floor(a/this.map.tileWidth+b/this.map.tileHeight),d=Math.floor(-a/this.map.tileWidth+b/this.map.tileHeight);return a=Math.floor((c-d)/2),b=c+d,new createjs.Point(a,b)},b.getPosition=function(a,b){return new createjs.Point(this.map.tileWidth*(a+Math.abs(b)%2/2-.5),this.map.tileHeight*(b/2+1))},creatine.tmx.StaggeredTileLayer=createjs.promote(a,"TileLayer")}(),function(){"use strict";var a=function(a,b){this.map=null,this.imagePath=null,this.name=null,this.width=null,this.height=null,this._initialize(a,b)},b=createjs.extend(a,createjs.Bitmap);b._initialize=function(a,b){a&&(this.Bitmap_constructor(b.image||null),this.map=a,this.name=b.name,this.imagePath=b.image,this.x=b.x,this.y=b.y,this.width=b.width,this.height=b.height,this.visible=b.visible,this.alpha=b.opacity)},creatine.tmx.ImageLayer=createjs.promote(a,"Bitmap")}(),function(){"use strict";var a=function(a,b){this.map=null,this.name=null,this.objects=null,this.visible=null,this.alpha=null,this._initialize(a,b)},b=a.prototype;b._initialize=function(a,b){a&&(this.map=a,this.name=b.name,this.objects=b.objects,this.visible=b.visible,this.alpha=b.opacity)},creatine.tmx.ObjectLayer=a}(),function(){"use strict";var a=function(a){this.version=null,this.orientation=null,this.renderOrder=null,this.height=null,this.width=null,this.tileHeight=null,this.tileWidth=null,this.tilesets=null,this.layers=null,this.properties=null,this._initialize(a)},b=createjs.extend(a,createjs.Container);b._initialize=function(a){this.Container_constructor(),this.version=a.version||1,this.orientation=a.orientation||"orthogonal",this.renderOrder=a.renderorder||"right-down",this.height=a.height||0,this.width=a.width||0,this.tileHeight=a.tileheight||0,this.tileWidth=a.tilewidth||0,this.properties=a.properties,this.tilesets=[],this.layers=[],this._createTilesets(a),this._createLayers(a)},b._createTilesets=function(a){for(var b=0;b<a.tilesets.length;b++)this.tilesets.push(new creatine.tmx.Tileset(a.tilesets[b]))},b._createLayers=function(a){for(var b=0;b<a.layers.length;b++){var c=a.layers[b].type;if("tilelayer"==c){if("orthogonal"==this.orientation)var d=creatine.tmx.OrthogonalTileLayer;else if("isometric"==this.orientation)var d=creatine.tmx.IsometricTileLayer;else{if("staggered"!=this.orientation)throw new Error('Unknown layer type: "'+c+'"');var d=creatine.tmx.StaggeredTileLayer}var e=new d(this,a.layers[b]);this.layers.push(e),this.addChild(e)}else if("objectgroup"==c)this.layers.push(new creatine.tmx.ObjectLayer(this,a.layers[b]));else if("imagelayer"==c){var e=new creatine.tmx.ImageLayer(this,a.layers[b]);this.addChild(e),this.layers.push(e)}}},b.getTilesetByGid=function(a){for(var b=this.tilesets.length-1;b>=0;b--)if(this.tilesets[b].firstgid<=a)return this.tilesets[b]},b.getLayerByName=function(a){for(var b=0;b<this.layers.length;b++)if(this.layers[b].name==a)return this.layers[b]},creatine.tmx.Map=createjs.promote(a,"Container")}(),this.creatine=this.creatine||{},function(){"use strict";var a=function(a,b){this.orientation=a,this.children=[],this.area=b},b=a.prototype;b.add=function(a,b,c,d){d=d||creatine.TOP_LEFT,b=b||0,c=c||0,this.children.push([a,b,d,c])},b.layout=function(a){a&&(this.area=a);for(var b=0,c=0,d=0,e=0,f=0;f<this.children.length;f++){var g=this.children[f][0],h=this.children[f][1],i=this.children[f][2],j=this.children[f][3];if(b+=2*j,h>0)c+=h;else{var k=g.getBounds();d+=k.width,e+=k.height}}for(var l,m,n,o,p=this.area.width-b-d,q=this.area.height-b-e,r=this.area.x,s=this.area.y,t=0,f=0;f<this.children.length;f++){var g=this.children[f][0],h=this.children[f][1],i=this.children[f][2],j=this.children[f][3];if(l=r+j,m=s+j,this.orientation==creatine.VERTICAL){if(0==h){var k=g.getBounds();n=k.width,o=k.height}else t=h/c,n=this.area.width-2*j,o=t*q;s+=o+2*j}else if(this.orientation==creatine.HORIZONTAL){if(0==h){var k=g.getBounds();n=k.width,o=k.height}else t=h/c,n=t*p,o=this.area.height-2*j;r+=n+2*j}this._resize_child(g,{x:l,y:m,width:n,height:o},i)}},b._resize_child=function(a,b,c){if(a.layout&&a.layout(b),a.getBounds)var d=a.getBounds();if(d)var e=d.width*a.scaleX,f=d.height*a.scaleY;else var e=0,f=0;switch(c){case creatine.TOP:case creatine.TOP_LEFT:case creatine.TOP_RIGHT:a.y=b.y;break;case creatine.LEFT:case creatine.CENTER:case creatine.RIGHT:a.y=b.y+b.height/2-f/2;break;case creatine.BOTTOM:case creatine.BOTTOM_LEFT:case creatine.BOTTOM_RIGHT:a.y=b.y+b.height-f}switch(c){case creatine.LEFT:case creatine.TOP_LEFT:case creatine.BOTTOM_LEFT:a.x=b.x;break;case creatine.TOP:case creatine.CENTER:case creatine.BOTTOM:a.x=b.x+b.width/2-e/2;break;case creatine.RIGHT:case creatine.TOP_RIGHT:case creatine.BOTTOM_RIGHT:a.x=b.x+b.width-e}a.x+=a.regX,a.y+=a.regY},creatine.BoxSizer=a}(),this.creatine=this.creatine||{},function(){"use strict";var a=function(a,b,c){this.rows=a,this.cols=b,this.children=[],this.area=c},b=a.prototype;b.add=function(a,b,c){c=c||creatine.TOP_LEFT,b=b||0,this.children.push([a,c,b])},b.layout=function(a){a&&(this.area=a);for(var b=this.area.width/this.cols,c=this.area.height/this.rows,d=0;d<this.children.length;d++){var e=this.children[d][0],f=this.children[d][1],g=this.children[d][2],h=this.area.x+b*Math.floor(d%this.cols)+g,i=this.area.y+c*Math.floor(d/this.cols)+g,j=b-2*g,k=c-2*g;this._resize_child(e,{x:h,y:i,width:j,height:k},f)}},b._resize_child=function(a,b,c){if(a.layout&&a.layout(b),a.getBounds)var d=a.getBounds();if(d)var e=d.width*a.scaleX,f=d.height*a.scaleY;else var e=0,f=0;switch(c){case creatine.TOP:case creatine.TOP_LEFT:case creatine.TOP_RIGHT:a.y=b.y;break;case creatine.LEFT:
case creatine.CENTER:case creatine.RIGHT:a.y=b.y+b.height/2-f/2;break;case creatine.BOTTOM:case creatine.BOTTOM_LEFT:case creatine.BOTTOM_RIGHT:a.y=b.y+b.height-f}switch(c){case creatine.LEFT:case creatine.TOP_LEFT:case creatine.BOTTOM_LEFT:a.x=b.x;break;case creatine.TOP:case creatine.CENTER:case creatine.BOTTOM:a.x=b.x+b.width/2-e/2;break;case creatine.RIGHT:case creatine.TOP_RIGHT:case creatine.BOTTOM_RIGHT:a.x=b.x+b.width-e}a.x+=a.regX,a.y+=a.regY},creatine.GridSizer=a}(),this.creatine=this.creatine||{},function(){"use strict";var a=function(a,b,c){this.Container_constructor(),this.direction=c||creatine.LEFT_TO_RIGHT,a.image?this.image=a.image:this.image=a,this.spacing=b||0,this.value=0},b=createjs.extend(a,createjs.Container);b.isVisible=function(){var a=this.value>0||this.cacheCanvas;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;var c=0,d=0,e=0,f=0,g=this.image.width,h=this.image.height;this.direction===creatine.LEFT_TO_RIGHT?c=1:this.direction===creatine.RIGHT_TO_LEFT?(c=-1,e=-g):this.direction===creatine.TOP_TO_BOTTOM?d=1:this.direction===creatine.BOTTOM_TO_TOP&&(d=-1,f=-h),this.removeAllChildren();for(var i=0;i<this.value;i++){var j=new createjs.Bitmap(this.image);j.x=e,j.y=f,this.addChild(j),e+=this.spacing*c+g*c,f+=this.spacing*d+h*d}return this.Container_draw(a,b)},creatine.DiscreteBar=createjs.promote(a,"Container")}(),this.creatine=this.creatine||{},function(){"use strict";var a=function(a,c,d,e,f,g,h){b.type=null,b.direction=null,b.image=null,b.gradientColors=null,b.fillColor=null,b.backgroundColor=null,b.value=null,b.min=null,b.max=null,b.width=null,b.height=null,a&&this._initialize(a,c,d,e,f,g,h)},b=createjs.extend(a,createjs.Shape);b._initialize=function(a,b,c,d,e,f,g){this.Shape_constructor(),a instanceof Array?(this.type="gradient",this.gradientColors=a):"string"==typeof a?(this.type="color",this.fillColor=a):(this.type="image",this.image=a,this.image.image&&(this.image=this.image.image)),null==b&&(b=null),null==c&&(c=creatine.LEFT_TO_RIGHT),null==d&&(d=100),null==e&&(e=10),null==f&&(f=0),null==g&&(g=100),this.backgroundColor=b,this.direction=c,this.width=d,this.height=e,this.min=f,this.max=g,this.value=0},b.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},b.layout=function(a){this.width=a.width,this.height=a.height},b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;var c=0,d=0,e=this.width,f=this.height,g=creatine.clip(e*(this.value-this.min)/(this.max-this.min),0,e),h=f,i=[e,0];if(this.direction===creatine.TOP_TO_BOTTOM){var i=[0,e],j=e;e=f,f=j,j=g,g=h,h=j}else if(this.direction===creatine.BOTTOM_TO_TOP){var i=[0,-e],j=e;e=f,f=-j,j=g,g=h,h=-j}else if(this.direction===creatine.RIGHT_TO_LEFT){var i=[-e,0];e=-e,g=-g}if(this.graphics.clear(),this.backgroundColor&&(this.graphics.beginFill(this.backgroundColor),this.graphics.drawRect(c,d,e,f)),"color"===this.type)this.graphics.beginFill(this.fillColor),this.graphics.drawRect(c,d,g,h);else if("gradient"===this.type){for(var k=[],l=0;l<this.gradientColors.length;l++)k.push(l/(this.gradientColors.length-1));this.graphics.beginLinearGradientFill(this.gradientColors,k,0,0,i[0],i[1]),this.graphics.drawRect(c,d,g,h)}else"image"===this.type&&(this.graphics.beginBitmapFill(this.image),this.graphics.drawRect(c,d,g,h));return this.graphics.draw(a),!0},creatine.ProgressBar=createjs.promote(a,"Shape")}(),this.creatine=this.creatine||{},function(){"use strict";var a=function(a,b){this.Bitmap_constructor(a),this.scaleMode=b||creatine.NOSCALE},b=createjs.extend(a,createjs.Bitmap);b.layout=function(a){var b=this.image.width,c=this.image.height,d=1,e=1;this.scaleMode===creatine.FIT?d=e=Math.min(a.height/c,a.width/b):this.scaleMode===creatine.FILL?d=e=Math.max(a.height/c,a.width/b):this.scaleMode===creatine.STRETCH&&(d=a.width/b,e=a.height/c),this.scaleX=d,this.scaleY=e},b.getBounds=function(){var a=this.image.width*this.scaleX,b=this.image.height*this.scaleY;return this._rectangle.setValues(0,0,a,b)},creatine.FlexBitmap=createjs.promote(a,"Bitmap")}();